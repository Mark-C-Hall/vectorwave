datasource db {
    provider     = "mysql"
    url          = env("DATABASE_URL")
    relationMode = "prisma"
}

generator client {
    provider = "prisma-client-js"
}

model User {
    id            String         @id @default(cuid())
    authId        String         @unique
    conversations Conversation[]

    @@index([authId], name: "authIdIndex")
}

model Conversation {
    id       String    @id @default(cuid())
    userId   String
    title    String
    messages Message[]
    user     User      @relation(fields: [userId], references: [id])

    @@index([userId], name: "userIdIndex")
}

model Message {
    id             String       @id @default(cuid())
    createdAt      DateTime     @default(now())
    content        String
    isFromUser     Boolean
    conversationId String
    conversation   Conversation @relation(fields: [conversationId], references: [id])

    @@index([conversationId], name: "conversationIdIndex")
}
